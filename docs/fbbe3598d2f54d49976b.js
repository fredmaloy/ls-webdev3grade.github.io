(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{621:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"editing"},[i("h3",{staticClass:"hedline__third-level editing__hedline"},[e._v("Новый отзыв")]),i("div",{staticClass:"editing__content feedback"},[i("label",{staticClass:"load__photo"},[i("div",{staticClass:"load__photo-continer"},[i("input",{staticClass:"load__photo-input",attrs:{type:"file"},on:{change:e.appendFileAndRenderPhoto}}),i("div",{staticClass:"load__photo-avatar"},[i("div",{staticClass:"load__photo-avatar__image",class:{filled:this.renderedPhotoUrl.length},style:{backgroundImage:"url("+this.renderedPhotoUrl+")"},model:{value:e.review.photo,callback:function(t){e.$set(e.review,"photo",t)},expression:"review.photo"}})]),i("div",{staticClass:"load__photo-hint"},[e._v("Добавить фото")])])]),i("div",{staticClass:"editing__feedback-data"},[i("form",{staticClass:"editing__feedback-form",attrs:{action:"#"}},[i("div",{staticClass:"editing__feedback-about__autor"},[i("label",{staticClass:"editing__feedback-form__block"},[i("div",{staticClass:"form__block-title"},[e._v("Имя автора")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.review.author,expression:"review.author"}],staticClass:"form__block-input",attrs:{type:"text",name:"name",placeholder:"Ведите имя автора"},domProps:{value:e.review.author},on:{input:function(t){t.target.composing||e.$set(e.review,"author",t.target.value)}}})]),i("label",{staticClass:"editing__feedback-form__block"},[i("div",{staticClass:"form__block-title"},[e._v("Должность автора")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.review.occ,expression:"review.occ"}],staticClass:"form__block-input",attrs:{type:"text",name:"position",placeholder:"Введите должность автора"},domProps:{value:e.review.occ},on:{input:function(t){t.target.composing||e.$set(e.review,"occ",t.target.value)}}})])]),i("label",{staticClass:"editing__feedback-form__block"},[i("div",{staticClass:"form__block-title"},[e._v("Отзыв")]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.review.text,expression:"review.text"}],staticClass:"form__block-textarea",attrs:{type:"text",name:"description",placeholder:"Оставьте короткий отзыв"},domProps:{value:e.review.text},on:{input:function(t){t.target.composing||e.$set(e.review,"text",t.target.value)}}})])])])]),i("div",{staticClass:"editing__btns-control feedback"},[i("button",{staticClass:"admin__btn",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.reviewAdd(t)}}},[i("div",{staticClass:"admin__btn-title"},[e._v("Сохранить")])]),i("button",{staticClass:"admin__btn cancel-btn",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.$emit("cancelReviewsAdding",e.cancelReviewsAdding)}}},[i("div",{staticClass:"admin__btn-title"},[e._v("Отмена")])])])])};a._withStripped=!0;var r=i(167);function n(e,t,i,a,r,n,o){try{var s=e[n](o),c=s.value}catch(e){return void i(e)}s.done?t(c):Promise.resolve(c).then(a,r)}function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var s={props:{reviews:Object},data:function(){return{renderedPhotoUrl:"",review:{photo:"",author:"",occ:"",text:""}}},methods:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){o(e,t,i[t])})}return e}({},Object(r.b)("reviews",["createReview","fetchReviews"]),{appendFileAndRenderPhoto:function(e){var t=this,i=e.target.files[0];this.review.photo=i;var a=new FileReader;try{a.readAsDataURL(i),a.onload=function(){t.renderedPhotoUrl=a.result}}catch(e){alert("произошла ошибка при загрузке фото")}},reviewAdd:function(){var e,t=(e=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.createReview(this.review);case 3:this.review.photo="",this.review.author="",this.review.occ="",this.review.text="",this.renderedPhotoUrl="",e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),alert("произошла ошибка при добавлении Отзыва");case 13:return e.prev=14,e.next=17,this.fetchReviews(this.review);case 17:e.next=21;break;case 19:e.prev=19,e.t1=e.catch(14);case 21:case"end":return e.stop()}},e,this,[[0,10],[14,19]])}),function(){var t=this,i=arguments;return new Promise(function(a,r){var o=e.apply(t,i);function s(e){n(o,a,r,s,c,"next",e)}function c(e){n(o,a,r,s,c,"throw",e)}s(void 0)})});return function(){return t.apply(this,arguments)}}()})},c=i(78),l=Object(c.a)(s,a,[],!1,null,null,null);l.options.__file="src/admin/components/reviews-add.vue";t.default=l.exports}}]);